<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description"
    content="Eagle Movie Picture Stitching Plugin - Vertically stitch multiple movie subtitle images into long panoramic images">
  <title>Movie Picture Stitching - Eagle Plugin</title>

  <link rel="stylesheet" href="vendor/normalize/normalize.css">

  <!-- Bootstrap 5.3.8 CSS -->
  <link rel="stylesheet" href="vendor/bootstrap-5.3.8/css/bootstrap.min.css">

  <!-- Custom Bootstrap Configuration & Design Tokens -->
  <link rel="stylesheet" href="css/bootstrap-config.css">

  <!-- Bootstrap Component Overrides -->
  <link rel="stylesheet" href="css/components/forms.css">
  <link rel="stylesheet" href="css/components/sliders.css">
  <link rel="stylesheet" href="css/components/buttons.css">
  <link rel="stylesheet" href="css/components/cards.css">
  <link rel="stylesheet" href="css/components/navbar.css">
  <link rel="stylesheet" href="css/components/toast.css">
  <link rel="stylesheet" href="css/components/modal.css">

  <!-- Utilities & Effects -->
  <link rel="stylesheet" href="css/utilities/layout.css">
  <link rel="stylesheet" href="css/utilities/effects.css">

  <!-- Animations -->
  <link rel="stylesheet" href="css/modules/animations.css">
</head>

<body>
  <div class="container-fluid vh-100 d-flex flex-column p-0 m-0">
    <!-- Header / Navbar -->
    <header class="navbar navbar-dark bg-dark border-bottom shadow-sm drag-region" role="banner">
      <div class="container-fluid px-4">
        <!-- Left: Logo + Title -->
        <div class="navbar-brand d-flex align-items-center gap-3 mb-0">
          <img src="logo.png" alt="Logo" width="40" height="40" class="rounded" aria-hidden="true">
          <h1 class="h5 mb-0 text-white fw-bold" data-i18n="ui.header.title">
            Movie Subtitle Long Image Stitching
          </h1>
        </div>

        <!-- Right: Action Buttons -->
        <div class="d-flex gap-2 no-drag">
          <button class="btn btn-sm btn-outline-info header-icon-btn" id="helpButton" type="button"
            data-i18n="[aria-label]ui.header.helpButton" data-i18n-title="ui.header.helpButton"
            aria-label="Help Documentation" title="Help Documentation">‚ùì</button>
          <button class="btn btn-sm btn-outline-warning header-icon-btn" id="pinButton" type="button"
            data-i18n="[aria-label]ui.header.pinWindow" data-i18n-title="ui.header.pinWindow" aria-label="Pin Window"
            title="Pin Window">üìå</button>
          <button class="btn btn-sm btn-outline-danger header-icon-btn" id="closeButton" type="button"
            data-i18n="[aria-label]ui.header.closeWindow" data-i18n-title="ui.header.closeWindow"
            aria-label="Close Window" title="Close Window">‚ùå</button>
        </div>
      </div>
    </header>

    <!-- Main Content Area - 3 Column Layout -->
    <main class="row g-2 m-0 p-2 flex-1-0 overflow-hidden" role="main">
      <!-- Left Panel: Image List -->
      <aside class="col-12 col-md-3 col-lg-3 d-flex flex-column">
        <div class="card bg-dark text-white border-secondary h-100 shadow-lg d-flex flex-column" role="complementary"
          data-i18n="[aria-label]ui.panels.imageList" aria-label="Selected Images List">
          <!-- Card Header: Image Count -->
          <div class="card-header bg-transparent border-secondary">
            <h6 class="mb-0 text-center" id="image-count-display">
              <span data-i18n="ui.interface.imagesSelected" data-i18n-options='{"count": 0}'>0 images selected</span>
            </h6>
          </div>
          <div class="card-body list" style="overflow-y: auto; overflow-x: hidden; flex: 1 1 0; min-height: 0;">
            <!-- Image list will be populated by JavaScript -->
          </div>
        </div>
      </aside>

      <!-- Center Panel: Preview -->
      <section class="col-12 col-md-6 col-lg-6 d-flex flex-column">
        <div class="card bg-dark text-white border-secondary h-100 shadow-lg d-flex flex-column"
          data-i18n="[aria-label]ui.panels.preview" aria-label="Image Preview Area">
          <div class="card-body preview"
            style="display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: auto; flex: 1 1 0; min-height: 0;">
            <!-- Preview canvas will be populated by JavaScript -->
          </div>
        </div>
      </section>

      <!-- Right Panel: Settings -->
      <aside class="col-12 col-md-3 col-lg-3 d-flex flex-column">
        <div class="card bg-dark text-white border-secondary h-100 shadow-lg d-flex flex-column" role="complementary"
          data-i18n="[aria-label]ui.panels.settings" aria-label="Settings Panel">
          <div class="card-body property"
            style="display: flex; flex-direction: column; overflow-y: auto; overflow-x: hidden; flex: 1 1 0; min-height: 0;">
            <!-- Top Cropping Percentage -->
            <div class="mb-3">
              <label for="cropTopSlider" class="form-label fw-bold text-white mb-2">
                <span data-i18n="ui.settings.cropTop">Top Crop Height (%):</span>
              </label>
              <!-- Slider + Number Input (Hybrid Control) -->
              <div class="d-flex align-items-center gap-2 mb-2">
                <input type="range" id="cropTopSlider" class="form-range flex-grow-1" value="0" min="0" max="99"
                  step="1" data-i18n="[aria-label]ui.tooltips.cropTop" aria-label="Top Cropping Percentage Slider"
                  aria-describedby="crop-top-help">
                <input type="number" id="cropTopPercent"
                  class="form-control form-control-sm bg-dark text-white border-secondary text-center"
                  style="width: 70px;" value="0" min="0" max="99" step="1" data-i18n="[title]ui.tooltips.cropTop"
                  title="Set the height percentage to crop from the top of images"
                  aria-label="Top Cropping Percentage Value" aria-describedby="crop-top-help">
              </div>
              <small id="crop-top-help" class="form-text text-muted">
                <span data-i18n="ui.settings.maxSettingTop">Max setting:</span>
                <span id="remaining-top">99</span>%
              </small>
            </div>

            <!-- Bottom Cropping Percentage -->
            <div class="mb-3">
              <label for="cropBottomSlider" class="form-label fw-bold text-white mb-2">
                <span data-i18n="ui.settings.cropBottom">Bottom Crop Height (%):</span>
              </label>
              <!-- Slider + Number Input (Hybrid Control) -->
              <div class="d-flex align-items-center gap-2 mb-2">
                <input type="range" id="cropBottomSlider" class="form-range flex-grow-1" value="15" min="0" max="99"
                  step="1" data-i18n="[aria-label]ui.tooltips.cropBottom" aria-label="Bottom Cropping Percentage Slider"
                  aria-describedby="crop-bottom-help">
                <input type="number" id="cropBottomPercent"
                  class="form-control form-control-sm bg-dark text-white border-secondary text-center"
                  style="width: 70px;" value="15" min="0" max="99" step="1" data-i18n="[title]ui.tooltips.cropBottom"
                  title="Set the height percentage to crop from the bottom of images"
                  aria-label="Bottom Cropping Percentage Value" aria-describedby="crop-bottom-help">
              </div>
              <small id="crop-bottom-help" class="form-text text-muted">
                <span data-i18n="ui.settings.maxSettingBottom">Max setting:</span>
                <span id="remaining-bottom">84</span>%
              </small>
            </div>

            <!-- Export Image Format -->
            <div class="mb-3">
              <label class="form-label fw-bold text-white mb-2" data-i18n="ui.settings.exportFormat">
                Export Format:
              </label>
              <!-- Format Button Group (Radio Buttons Styled as Badges) -->
              <div class="btn-group w-100" role="group" aria-label="Export Format Selection">
                <input type="radio" class="btn-check" name="exportFormat" id="format-jpg" value="jpg" checked
                  autocomplete="off">
                <label class="btn btn-outline-success format-btn" for="format-jpg"
                  data-i18n="[title]ui.tooltips.formatJpg" title="JPEG format - good compression, smaller files">
                  <span class="format-icon">üì∑</span>
                  <span class="format-label">JPG</span>
                </label>

                <input type="radio" class="btn-check" name="exportFormat" id="format-webp" value="webp"
                  autocomplete="off">
                <label class="btn btn-outline-success format-btn" for="format-webp"
                  data-i18n="[title]ui.tooltips.formatWebp" title="WebP format - best compression, modern browsers">
                  <span class="format-icon">üåê</span>
                  <span class="format-label">WEBP</span>
                </label>

                <input type="radio" class="btn-check" name="exportFormat" id="format-png" value="png"
                  autocomplete="off">
                <label class="btn btn-outline-success format-btn" for="format-png"
                  data-i18n="[title]ui.tooltips.formatPng" title="PNG format - lossless, larger files">
                  <span class="format-icon">üñºÔ∏è</span>
                  <span class="format-label">PNG</span>
                </label>
              </div>
              <small class="form-text text-muted d-block mt-2">
                <span id="format-description">Good compression, smaller files</span>
              </small>
            </div>

            <!-- Export Image Quality -->
            <div class="mb-3">
              <label for="exportQuality" class="form-label fw-bold text-white mb-1">
                <span data-i18n="ui.settings.exportQuality">Export Quality:</span>
                <span class="badge bg-success ms-2" id="qualityValue">0.92</span>
              </label>
              <input type="range" id="exportQuality" class="form-range" value="0.92" min="0.1" max="1.0" step="0.01"
                data-i18n="[title]ui.tooltips.exportQuality" title="Set the quality of exported image, range 0.1-1.0"
                aria-label="Export Image Quality" aria-describedby="quality-help">
              <small id="quality-help" class="form-text text-muted" data-i18n="ui.settings.qualityHelp">Higher value =
                better quality, larger file</small>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="d-flex flex-column gap-2 mt-auto align-items-center pb-2">
            <button id="previewButton" class="btn btn-primary shadow-sm" type="button" style="min-width: 250px;"
              aria-label="Preview Stitched Image">
              <span class="button-text" data-i18n="ui.buttons.preview">Preview</span>
            </button>
            <button id="saveButton" class="btn btn-success shadow-sm" type="button" style="min-width: 250px;"
              aria-label="Save Image to Eagle">
              <span class="button-text" data-i18n="ui.buttons.save">Save to Eagle</span>
            </button>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- Toast Notification Container -->
  <div id="toast-container" class="toast-container" role="region" aria-live="polite" aria-label="Notifications"></div>

  <!-- Keyboard Shortcuts Help Modal -->
  <div id="shortcuts-modal" class="modal fade" tabindex="-1" aria-labelledby="shortcuts-modal-title" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content bg-dark text-white border-secondary">
        <div class="modal-header border-secondary">
          <h5 class="modal-title" id="shortcuts-modal-title" data-i18n="ui.shortcuts.title">
            Keyboard Shortcuts
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <table class="table table-dark table-sm">
            <thead>
              <tr>
                <th data-i18n="ui.shortcuts.actionColumn">Action</th>
                <th data-i18n="ui.shortcuts.shortcutColumn">Shortcut</th>
              </tr>
            </thead>
            <tbody id="shortcuts-table-body">
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
        <div class="modal-footer border-secondary">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-i18n="ui.buttons.close">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JavaScript (after content, before plugin JS) -->
  <script src="vendor/bootstrap-5.3.8/js/bootstrap.bundle.min.js"></script>

  <!-- Internationalization support files -->
  <script type="text/javascript" src="js/i18n-manager.js"></script>
  <script type="text/javascript" src="js/i18n-utils.js"></script>

  <!-- Modular architecture - Core modules -->
  <script type="text/javascript" src="js/modules/storage-manager.js"></script>
  <script type="text/javascript" src="js/modules/parameter-manager.js"></script>
  <script type="text/javascript" src="js/modules/eagle-api-manager.js"></script>
  <script type="text/javascript" src="js/modules/canvas-renderer.js"></script>
  <script type="text/javascript" src="js/modules/ui-manager.js"></script>
  <script type="text/javascript" src="js/modules/file-manager.js"></script>
  <script type="text/javascript" src="js/modules/keyboard-shortcut-manager.js"></script>

  <!-- Main application -->
  <script type="text/javascript" src="js/plugin-modular.js"></script>
</body>

</html>
